<Window x:Class="NetworkService.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:NetworkService.ViewModel"
        xmlns:v="clr-namespace:NetworkService.Views"
        Title="Network Service" Width="900" Height="650">

    <Window.InputBindings>
        <!-- Global Navigation -->
        <KeyBinding Key="D1" Modifiers="Control" 
                Command="{Binding NavCommand}" 
                CommandParameter="entities"/>
        <KeyBinding Key="D2" Modifiers="Control" 
                Command="{Binding NavCommand}" 
                CommandParameter="display"/>
        <KeyBinding Key="D3" Modifiers="Control" 
                Command="{Binding NavCommand}" 
                CommandParameter="graph"/>
    </Window.InputBindings>

    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:EntitiesViewModel}">
            <v:EntitiesView/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:DisplayViewModel}">
            <v:DisplayView/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:MeasurementGraphViewModel}">
            <v:MeasurementGraphView/>
        </DataTemplate>
    </Window.Resources>

    <DockPanel LastChildFill="True">

        <!-- NAVBAR -->
        <DockPanel DockPanel.Dock="Top" 
                   Background="{StaticResource PrimaryButtonColor}" 
                   Height="40">
            <StackPanel Orientation="Horizontal" 
                        VerticalAlignment="Center" 
                        Margin="10,0,0,0">
                <Button Content="Network Entities"
                        ToolTip="Go to Entities View (Ctrl+1)"
                        Command="{Binding NavCommand}" 
                        CommandParameter="entities"
                        Margin="0,0,10,0"/>
                <Button Content="Network Display"
                        ToolTip="Go to Display View (Ctrl+2)"
                        Command="{Binding NavCommand}" 
                        CommandParameter="display"
                        Margin="0,0,10,0"/>
                <Button Content="Measurement Graph"
                        ToolTip="Go to Measurement Graph View (Ctrl+3)"
                        Command="{Binding NavCommand}" 
                        CommandParameter="graph"/>
            </StackPanel>
        </DockPanel>

        <!-- STATUS BAR -->
        <Border DockPanel.Dock="Bottom"
                Background="{StaticResource PrimaryButtonColor}"
                Padding="10,0"
                Height="30">
            <StackPanel Orientation="Horizontal" 
                        VerticalAlignment="Center">
                <TextBlock Text="⚡ Status:"
                           Foreground="White"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           Margin="0,0,5,0"/>
                <TextBlock Text="{Binding StatusBarMessage}"
                           Foreground="White"
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- TERMINAL -->
        <Border DockPanel.Dock="Bottom"
            Background="#111"
            BorderBrush="#333"
            BorderThickness="1"
            CornerRadius="6"
            Margin="20,10"
            Padding="0">

            <DockPanel>
                <!-- HEADER TERMINALA -->
                <DockPanel DockPanel.Dock="Top" 
                           Background="#222" 
                           Height="24" 
                           LastChildFill="False">
                    <Ellipse Width="10" 
                             Height="10" 
                             Fill="Red" 
                             Margin="6,0"/>
                    <Ellipse Width="10" 
                             Height="10" 
                             Fill="Orange" 
                             Margin="3,0"/>
                    <Ellipse Width="10" 
                             Height="10" 
                             Fill="LimeGreen" 
                             Margin="6,0"/>
                    <TextBlock Text=" Terminal"
                               Foreground="LightGray"
                               FontFamily="Agency FB"
                               FontSize="16"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"/>
                </DockPanel>

                <!-- INPUT POLJE TERMINALA -->
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <TextBox Text="{Binding TerminalInput, UpdateSourceTrigger=PropertyChanged}"
                             AcceptsReturn="False"
                             Foreground="LightGreen"
                             Background="Black"
                             BorderThickness="0"
                             FontFamily="Consolas"
                             FontSize="14"
                             TextWrapping="Wrap"
                             Padding="10"
                             Margin="0">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Enter"
                                    Command="{Binding TerminalEnterCommand}" />
                        </TextBox.InputBindings>
                    </TextBox>
                </ScrollViewer>
            </DockPanel>
        </Border>

        <!-- CENTRALNI SADRZAJ -->
        <ContentControl Content="{Binding CurrentViewModel}" />

    </DockPanel>
</Window>